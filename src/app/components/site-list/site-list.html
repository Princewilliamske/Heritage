<!-- src/app/components/site-list/site-list.html -->
<div>
  <div class="flex flex-col sm:flex-row justify-between items-center mb-6 gap-4">
    <h2 class="text-3xl font-bold font-serif text-stone-800 border-b-2 border-amber-800 pb-2">Historical Sites</h2>
    
    <!-- View Mode Toggle -->
    <div class="flex items-center bg-stone-200/80 rounded-lg p-1 space-x-1">
      <button 
        (click)="setViewMode('list')"
        [ngClass]="viewMode() === 'list' ? 'bg-white shadow' : 'text-stone-600 hover:bg-white/50'"
        class="px-3 py-1.5 rounded-md text-sm font-medium transition-all flex items-center gap-2">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path d="M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z" /></svg>
        List View
      </button>
      <button 
        (click)="setViewMode('map')"
        [ngClass]="viewMode() === 'map' ? 'bg-white shadow' : 'text-stone-600 hover:bg-white/50'"
        class="px-3 py-1.5 rounded-md text-sm font-medium transition-all flex items-center gap-2">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M12 1.586l-4 4v12.828l4-4V1.586zM3.707 3.293A1 1 0 002 4v10a1 1 0 00.293.707L6 18.414V5.586L3.707 3.293zM17.707 5.293A1 1 0 0016 6v10a1 1 0 00.293.707L20 20.414V9.586L17.707 5.293z" clip-rule="evenodd" /></svg>
        Map View
      </button>
    </div>
  </div>

  <div *ngIf="!loading()">
    <!-- List View -->
    <div *ngIf="viewMode() === 'list'" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
      <a *ngFor="let site of sites()" 
         [routerLink]="['/sites', site.id]" 
         class="block rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-600 focus:ring-offset-2 overflow-hidden">
        <app-site-card [site]="site" /> <!-- Fixed: Changed [Site] to [site] -->
      </a>
    </div>

    <!-- Map View -->
    <div *ngIf="viewMode() === 'map'" class="bg-white rounded-lg shadow-lg overflow-hidden">
       <div id="map" class="w-full h-[600px] rounded-lg"></div>
    </div>
  </div>

  <!-- Skeleton Loader Grid -->
  <div *ngIf="loading()" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
    <div *ngFor="let item of skeletonItems" class="bg-white rounded-lg shadow-lg overflow-hidden h-full flex flex-col animate-pulse">
      <div class="w-full h-48 bg-stone-200"></div>
      <div class="p-6 flex flex-col flex-grow">
        <div class="h-6 w-3/4 bg-stone-200 rounded mb-4"></div>
        <div class="h-4 w-full bg-stone-200 rounded mb-2"></div>
        <div class="h-4 w-5/6 bg-stone-200 rounded mb-4"></div>
        <div class="flex items-center text-sm mt-auto">
          <div class="h-5 w-5 mr-2 bg-stone-200 rounded-full"></div>
          <div class="h-4 w-1/3 bg-stone-200 rounded"></div>
        </div>
      </div>
    </div>
  </div>
</div>